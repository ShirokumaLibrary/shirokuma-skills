---
name: project-config-generator
description: Generates and updates project-specific configuration files for skills (tech-stack, patterns, issues, setup, workflows). Use when setting up a new project, updating project conventions, or configuring skill project directories.
---

# Project Config Generator

Creates and maintains project-specific configuration directories for skills like `nextjs-vibe-coding` and `code-reviewing`.

## When to Use

Automatically invoke when the user:
- Sets up a new project with existing skills
- Says "generate project config" or "initialize skill configs"
- Needs to update tech-stack versions
- Wants to add project-specific patterns or conventions
- Mentions "configure skills for this project"

## What This Generates

The `project/` directory within each skill contains project-specific configurations:

```
skill-name/
â”œâ”€â”€ common/           # Reusable (shareable)
â””â”€â”€ project/          # Project-specific (generated by this skill)
    â”œâ”€â”€ reference/
    â”‚   â””â”€â”€ tech-stack.md
    â”œâ”€â”€ patterns/
    â”‚   â””â”€â”€ *.md
    â”œâ”€â”€ issues/
    â”‚   â””â”€â”€ known-issues.md
    â”œâ”€â”€ setup/
    â”‚   â””â”€â”€ *.md
    â”œâ”€â”€ workflows/
    â”‚   â””â”€â”€ *.md
    â””â”€â”€ optional/
        â””â”€â”€ *.md
```

## Workflow

### Step 1: Identify Target Skills

Locate skills that support project-specific configurations:

```bash
ls .claude/skills/*/project/ 2>/dev/null || echo "No project configs found"
```

Supported skills:
- `nextjs-vibe-coding`
- `code-reviewing`

### Step 2: Gather Project Information

Collect from user or detect automatically:

| Info | Source | Example |
|------|--------|---------|
| Tech Stack | `package.json`, CLAUDE.md | Next.js 16, React 19 |
| Database | schema files | Drizzle + PostgreSQL |
| Auth | auth config | Better Auth |
| Styling | tailwind config | Tailwind v4 + shadcn |
| Testing | jest/playwright config | Jest + Playwright |
| i18n | messages directory | next-intl (ja/en) |

### Step 3: Generate Files

Use templates from `templates/` directory:

#### Required Files

1. **tech-stack.md** - Version information
   ```bash
   cat templates/tech-stack.md.template
   ```

2. **known-issues.md** - CVEs and bugs
   ```bash
   cat templates/known-issues.md.template
   ```

#### Optional Files

| File | When to Create |
|------|----------------|
| `patterns/*.md` | Project has unique patterns |
| `setup/*.md` | Complex setup documentation needed |
| `workflows/*.md` | Project-specific workflows |
| `optional/*.md` | Optional integrations |

### Step 4: Apply Templates

For each target skill:

```bash
SKILL_DIR=".claude/skills/{skill-name}"
mkdir -p "$SKILL_DIR/project/reference"
mkdir -p "$SKILL_DIR/project/patterns"
mkdir -p "$SKILL_DIR/project/issues"
mkdir -p "$SKILL_DIR/project/setup"
mkdir -p "$SKILL_DIR/project/workflows"
mkdir -p "$SKILL_DIR/project/optional"
```

Generate files with detected values:
- Replace `{{NEXTJS_VERSION}}` with actual version
- Replace `{{REACT_VERSION}}` with actual version
- Add project-specific patterns

### Step 5: Install Rules (Stack Detection)

Install rules from `shirokuma-skills/rules/` based on detected tech stack.

```bash
mkdir -p .claude/rules
```

#### Detection Logic

| Condition | Source | Rules Installed |
|-----------|--------|----------------|
| Always | `rules/` (root) | `skill-authoring.md`, `output-destinations.md` |
| Always | `rules/github/` | `discussions-usage.md`, `project-items.md` |
| `next.config.*` exists | `rules/nextjs/` | All 7 rules |
| `shirokuma-docs.config.*` exists | `rules/shirokuma-docs/` | `shirokuma-annotations.md` |

#### Next.js Stack Rules (`rules/nextjs/`)

| Rule | Content |
|------|---------|
| `tech-stack.md` | Recommended stack + key patterns |
| `known-issues.md` | CVEs + framework issues |
| `radix-ui-hydration.md` | Mounted state pattern (path: `components/**`) |
| `server-actions.md` | Auth â†’ CSRF â†’ Zod flow (path: `lib/actions/**`) |
| `tailwind-v4.md` | CSS variable syntax (path: `**/*.css`, `components/ui/**`) |
| `lib-structure.md` | Directory conventions (path: `lib/**`) |
| `testing.md` | Jest/Playwright patterns (path: `**/*.test.*`) |

#### Always Generated: `language-policy.md`

This rule is **not** copied from the library â€” it must be generated per-project because:
- Output destinations vary by project (chat, config files, code, i18n, docs)
- Each project has unique exceptions (e.g., i18n files, templates, DB seeds)
- Instructions must be written **in the language they govern** for compliance

##### Why Mixed-Language

AI tends to ignore language directives written in a different language.
Write Japanese instructions in Japanese, English instructions in English.
This is the one rule file where mixing languages is correct.

##### Required Sections

| Section | Language | Content |
|---------|----------|---------|
| Response Language | User's language | When to respond in which language |
| Configuration Files | English | List file types that must be English |
| Code & Comments | English | Variable names, comments, commits |
| Exceptions | User's language | Project-specific overrides |

##### Detection Logic

| Detect | Source | Affects |
|--------|--------|---------|
| User language | CLAUDE.md, `messages/`, interaction history | Fix response language in generated rule |
| i18n setup | `messages/`, `next-intl`, `i18next` | Add i18n exception |
| Monorepo | `pnpm-workspace.yaml` | Note per-app language rules |
| DB seeds | `seed.ts`, `seed/` | Note seed data language |
| Docs | `docs/`, `shirokuma-docs.config.*` | Add docs language policy |

##### Generation Template

Detect the project's primary language first, then generate the Response Language
section **in that language** with a fixed directive. Do NOT use a dynamic table.

**Japanese project:**

```markdown
# Language Policy

## å›ç­”è¨€èª

æ—¥æœ¬èªã§å›ç­”ã—ã¦ãã ã•ã„ã€‚

å¯¾è±¡ï¼š
- ãƒãƒ£ãƒƒãƒˆå¿œç­”
- ã‚¹ã‚­ãƒ«å‡ºåŠ›ï¼ˆãƒ¬ãƒãƒ¼ãƒˆãƒ»ã‚µãƒãƒªãƒ¼ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€è³ªå•ãƒ»ç¢ºèª
- GitHub Issuesï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
- GitHub Discussionsï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
- PR ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡

## Configuration Files (English)

All configuration files must be written in English:

| File Type | Language | Reason |
|-----------|----------|--------|
| SKILL.md | English | Shareable, searchable |
| AGENT.md | English | Consistent structure |
| rules/*.md | English | Cross-project reuse |
| CLAUDE.md | English | Open source friendly |
{Add project-specific config files here}

## Code & Comments

| Element | Language |
|---------|----------|
| Code | English |
| Variable names | English |
| Comments | English |
| Commit messages | English |
| JSDoc/TSDoc | English |

## ä¾‹å¤–

{ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ä¾‹å¤–ã‚’ã“ã“ã«è¿½åŠ }
- UI ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® i18n è¨­å®šã«å¾“ã†
```

**English project:**

```markdown
# Language Policy

## Response Language

Respond in English.

This applies to:
- Chat responses
- Skill outputs (reports, summaries)
- Error messages and confirmations
- GitHub Issues (title, body, comments)
- GitHub Discussions (title, body, comments)
- PR title and body

## Configuration Files (English)

All configuration files must be written in English:

| File Type | Language | Reason |
|-----------|----------|--------|
| SKILL.md | English | Shareable, searchable |
| AGENT.md | English | Consistent structure |
| rules/*.md | English | Cross-project reuse |
| CLAUDE.md | English | Open source friendly |
{Add project-specific config files here}

## Code & Comments

| Element | Language |
|---------|----------|
| Code | English |
| Variable names | English |
| Comments | English |
| Commit messages | English |
| JSDoc/TSDoc | English |

## Exceptions

{Add project-specific exceptions here, e.g.:}
- User-facing content (UI text, translations) follows project i18n setup
```

##### Customization Points

| Project Type | Additions |
|--------------|-----------|
| Next.js + i18n | Add `messages/{locale}/` to Exceptions |
| Markdown-only repo | Remove Code & Comments section, add content rules |
| Monorepo | Note per-app language differences |
| CLI tool | Add CLI output language policy |

#### Post-Install Adjustments

After copying rules, adjust project-specific values:
- `tech-stack.md`: Update versions from `package.json`
- `known-issues.md`: Add project-specific CVEs if any
- Path-specific rules: Adjust `paths:` frontmatter to match project structure

Use the `managing-rules` skill for further rule customization.

### Step 6: Validate

Checklist:
- [ ] `project/reference/tech-stack.md` exists
- [ ] `project/issues/known-issues.md` exists
- [ ] `.claude/rules/` contains installed rules
- [ ] All template placeholders replaced
- [ ] Links in SKILL.md point to valid files

### Step 7: Report

Output summary:

```markdown
## Project Config Generated

### Target Skills
- nextjs-vibe-coding
- code-reviewing

### Files Created/Updated
- project/reference/tech-stack.md
- project/issues/known-issues.md
- project/patterns/lib-structure.md

### Detected Stack
| Category | Value |
|----------|-------|
| Framework | Next.js 16.0.7 |
| Database | Drizzle 0.44.7 |
| Auth | Better Auth 1.4.3 |
```

## Template Reference

| Template | Purpose |
|----------|---------|
| [tech-stack.md.template](templates/tech-stack.md.template) | Version info |
| [known-issues.md.template](templates/known-issues.md.template) | CVE tracking |
| [lib-structure.md.template](templates/lib-structure.md.template) | lib/ conventions |
| [github-discussions.md.template](templates/github-discussions.md.template) | Discussion categories setup |

## GitHub Discussions Setup

When setting up a new project, configure Discussions categories for knowledge management.

### Quick Setup Guide

1. Enable Discussions: `Settings â†’ General â†’ Features â†’ Discussions`
2. Open category settings: `https://github.com/{owner}/{repo}/discussions/categories`
3. Click "New category" and add from [template](templates/github-discussions.md.template)

### Categories to Add

| Category | Icon | Format | Purpose |
|----------|------|--------|---------|
| Handovers | ğŸ”„ | Announcement | Session continuity |
| ADR | ğŸ“ | Announcement | Design decisions |
| Knowledge | ğŸ’¡ | Announcement | Confirmed patterns |
| Research | ğŸ”¬ | Open-ended | Investigations |

### Integration with Rules

```
Discussion (human-readable, user language)
    â†“ extract key points
.claude/rules/ (AI-readable, English)
```

See [template](templates/github-discussions.md.template) for body templates.

### Generate Discussion Templates

Generate `.github/DISCUSSION_TEMPLATE/` files for the project.

**Trigger**: "generate discussion templates" or "setup discussion forms"

**Workflow**:

1. **Detect language** from user or CLAUDE.md (default: en)
2. **Copy templates** from `templates/discussion-templates/{lang}/` to `.github/DISCUSSION_TEMPLATE/`
3. **Verify** category slugs match existing categories

**Available Languages**:

| Language | Directory | Files |
|----------|-----------|-------|
| English | `templates/discussion-templates/en/` | handovers.yml, adr.yml, knowledge.yml, research.yml |
| Japanese | `templates/discussion-templates/ja/` | handovers.yml, adr.yml, knowledge.yml, research.yml |

**Example**:

```bash
# Generate templates (detect language from CLAUDE.md or ask user)
"generate discussion templates"

# Specify language
"generate discussion templates in Japanese"
"generate discussion templates --lang ja"
```

**Output**:

```
.github/DISCUSSION_TEMPLATE/
â”œâ”€â”€ handovers.yml
â”œâ”€â”€ adr.yml
â”œâ”€â”€ knowledge.yml
â””â”€â”€ research.yml
```

## Quick Commands

```bash
# Initialize for current project
"generate project config"

# Update tech stack versions
"update tech-stack versions"

# Add new pattern
"add project pattern for {feature}"

# Sync from CLAUDE.md
"sync project configs from CLAUDE.md"

# Generate discussion templates
"generate discussion templates"
"generate discussion templates in Japanese"
```

## Notes

- Run after major dependency updates
- Keep tech-stack.md in sync with package.json
- Project configs are NOT shared between projects
- Common configs belong in `common/` directory
